(this["webpackJsonpreact-sass-boilerplate"]=this["webpackJsonpreact-sass-boilerplate"]||[]).push([[5],{101:function(e,t,a){"use strict";function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}a.r(t);var l,c=a(8),m=a(9),s=a(17),i=a(11),u=a(10),d=a(0),p=a.n(d),g=a(51),v=a.n(g),y=a(50),f=(a(99),function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(c.a)(this,a),(r=t.call(this,e)).state={rolltime:18,cmdr_dmgToggle:0},r.rolldice=r.rolldice.bind(Object(s.a)(r)),r.changePlayerValue=r.changePlayerValue.bind(Object(s.a)(r)),r.submitPlayerValue=r.submitPlayerValue.bind(Object(s.a)(r)),r.addCustomValue=r.addCustomValue.bind(Object(s.a)(r)),r}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;l=v()("http://".concat(window.location.hostname,":").concat(y.a)),console.log("this.props.location.pathname",this.props.location.pathname),l.emit("roomExists",this.props.location.pathname),l.on("roomUpdated",(function(t){e.setState({room:JSON.parse(t)})})),l.on("sendConsole",(function(e){console.log(JSON.parse(e))}))}},{key:"componentDidUpdate",value:function(){console.log("update",this.state.room)}},{key:"updateRoom",value:function(e){l.emit("updateRoom",JSON.stringify(e))}},{key:"removePlayer",value:function(e){var t=n({},this.state.room);t.roomData.player_data.forEach((function(t,a){return t.cmdr_dmg.splice(e,1)})),t.roomData.player_data.splice(e,1),this.setState({room:t}),this.updateRoom(this.state.room)}},{key:"submitPlayerValue",value:function(e){var t=n({},this.state.room),a=e.target.elements[0].name,r=e.target.elements[0].attributes.index.value,o=e.target.elements[0].type,l=e.target.elements[0].value,c=e.target.elements[0].placeholder;"number"===o&&(l=parseInt(l)),t.roomData.player_data[r][a]=l,"name"===a&&t.roomData.player_data.forEach((function(e,t){var a=e.cmdr_dmg;a=a.map((function(e,t){return e.name===c?{id:e.id,name:l,dmg:e.dmg}:e})),e.cmdr_dmg=a})),this.setState({room:t}),this.updateRoom(this.state.room)}},{key:"addCustomValue",value:function(e){console.log("fireing");var t=n({},this.state.room);console.log(" ADDING CUSTOM ",t.roomData.player_data[a]);e.target.type;var a=parseInt(e.target.attributes.index.value);e.target.value;t.roomData.player_data[a].custom.push({name:"tester",type:"field",value:0}),console.log(" ADDED CUSTOM ",t.roomData.player_data[a]),this.setState({room:t}),this.updateRoom(this.state.room)}},{key:"changePlayerValue",value:function(e){var t,a,r=n({},this.state.room),o=e.target.name,l=e.target.type,c=e.target.attributes.nested.value;if("number"===l?(t=parseInt(e.target.attributes.index.value),a=parseInt(e.target.value)):(t=e.target.attributes.index.value,a=e.target.value),console.log("NESTED ",c,o,t,l,a),c>0){var m=parseInt(e.target.attributes.subindex.value),s=e.target.attributes.subkey.value;if(this.state.cmdr_dmgToggle>0){var i=r.roomData.player_data[t][o][m].dmg-a;r.roomData.player_data[t].life=r.roomData.player_data[t].life+i,console.log("LIF + CMD DMG",r.roomData.player_data[t],i,r.roomData.player_data[t][o][m])}console.log(r.roomData.player_data[t]),r.roomData.player_data[t][o][m][s]=a}else r.roomData.player_data[t][o]=a;this.setState({room:r}),this.updateRoom(this.state.room)}},{key:"rolldice",value:function(e){var t=this,a=n({},this.state.room);a.roomData.dice.rolling=!0,this.setState({room:a});for(var r=function(r){setTimeout((function(){a.roomData.dice.dicevalues.forEach((function(t,a){a!==e&&"all"!==e||(t.value=Math.floor(Math.random()*t.sides)+1)})),r===t.state.rolltime-1&&(a.roomData.dice.rolling=!1),t.setState({room:a}),t.updateRoom(t.state.room)}),2*r*r)},o=0;o<this.state.rolltime;o++)r(o)}},{key:"render",value:function(){var e=this;return p.a.createElement("main",null,this.state.room&&this.state.room.roomData&&p.a.createElement("div",null,p.a.createElement("h1",null,"Room PAGE : ",this.state.room.roomNum),p.a.createElement("div",{className:"row"},p.a.createElement("div",{className:"col-sm-6"},p.a.createElement("div",{className:"row"},p.a.createElement("button",{onClick:function(){return e.rolldice("all")}},"Re-Roll all dice")),p.a.createElement("div",{className:"row"},this.state.room.roomData.dice.dicevalues.map((function(t,a){return p.a.createElement("button",{key:"dice-".concat(a),className:"dice-".concat(t.sides),onClick:function(){return e.rolldice(a)}},t.value)})))),p.a.createElement("div",{className:"col-sm-6"},p.a.createElement("button",{className:this.state.cmdr_dmgToggle?"active":"",onClick:function(){return e.setState({cmdr_dmgToggle:!e.state.cmdr_dmgToggle})}},"Toggle cmdr dmg link")),p.a.createElement("div",{className:"row"},this.state.room.roomData.player_data.map((function(t,a){return p.a.createElement("div",{key:"".concat(t.name,"_").concat(a),className:"col-xs-12 col-sm-6 playerCard"},p.a.createElement("div",{className:"playerCard-wrapper"},p.a.createElement("div",{className:"playerCard-exit"},p.a.createElement("button",{onClick:function(){return e.removePlayer(a)}},"X")),p.a.createElement("div",{className:"playerCard-content"},p.a.createElement("form",{onSubmit:e.submitPlayerValue},p.a.createElement("input",{type:"text",name:"name",placeholder:t.name,index:a,className:"playerCard-name"}),p.a.createElement("input",{type:"submit",value:"^"})),p.a.createElement("input",{type:"number",name:"life",value:t.life,index:a,nested:0,onChange:e.changePlayerValue,className:"playerCard-life",step:1}),p.a.createElement("div",{className:"row playerCard-bigsec"},t.cmdr_dmg.map((function(t,r){return p.a.createElement("div",{className:"col-sm-4 cmdrDmg",key:"".concat(t.name,"_").concat(t.id,"_").concat(r)},p.a.createElement("span",null,t.name),p.a.createElement("input",{type:"number",name:"cmdr_dmg",subkey:"dmg",value:t.dmg,index:a,subindex:r,onChange:e.changePlayerValue,nested:1,className:"cmdrDmg-dmg",step:1}))}))),p.a.createElement("div",{className:"row"},p.a.createElement("form",{onSubmit:e.addCustomValue},"test herer",p.a.createElement("input",{type:"text",placeholder:"new value",index:a,className:"playerCard-custom"}),p.a.createElement("input",{type:"submit",value:"^"}))),p.a.createElement("div",{className:"row playerCard-bigsec"},t.custom.map((function(e,t){return p.a.createElement("div",{className:"col-sm-6",key:"".concat(e.name,"_").concat(t)},"field"==e.type&&p.a.createElement("div",{className:"row"},e.name,p.a.createElement("input",{type:"number",name:e.name,value:e.value,index:a,nested:0,step:1})),"toggle"==e.type&&p.a.createElement("div",{className:"customtoggle ".concat(e.active)},e.name,p.a.createElement("div",{className:"customtoggle-toggleOn"}),p.a.createElement("div",{className:"customtoggle-toggleOff"})))}))))))}))))))}}]),a}(d.Component));t.default=f},50:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var r="8000"},62:function(e,t){},99:function(e,t,a){}}]);
//# sourceMappingURL=5.182efe83.chunk.js.map